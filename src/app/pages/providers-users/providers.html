<div class="card p-4 gap-4">
    <!-- Service Buttons -->
    <div class="flex flex-wrap justify-around gap-2">
      <p-button *ngFor="let type of serviceTypes"
        [label]="type.label"
        [icon]="type.icon"
        (click)="loadProviders(type.value, 1)"
        [variant]="selectedService === type.value ? 'outlined' : undefined">
      </p-button>
    </div>
  
    <!-- Table -->
    <p-table #dt
      [value]="providers"
      [paginator]="true"
      [rows]="rows"
      [totalRecords]="totalRecords"
      [lazy]="true"
      [loading]="loading"
      (onPage)="onPageChange($event)"
      responsiveLayout="stack"
      [breakpoint]="'768px'"
      class="w-full mt-4">
  
      <!-- Header -->
      <ng-template pTemplate="header">
        <tr class="bg-gray-100">
          <th class="p-3 text-left">Name</th>
          <th class="p-3 text-left">Email</th>
          <th class="p-3 text-left">Account Type</th>
          <th class="p-3 text-left">Service Type</th>
          <th class="p-3 text-left">Documents</th>
        </tr>
      </ng-template>
  
      <!-- Body -->
      <ng-template pTemplate="body" let-provider>
        <tr class="border-b hover:bg-gray-50 md:table-row block md:border-none">
          <td class="p-3 flex justify-between md:table-cell" data-label="Name">
            <span class="md:hidden font-semibold text-gray-700">Name:</span>
            {{ provider.fullName }}
          </td>
          <td class="p-3 flex justify-between md:table-cell" data-label="Email">
            <span class="md:hidden font-semibold text-gray-700">Email:</span>
            {{ provider.email || 'N/A' }}
          </td>
          <td class="p-3 flex justify-between md:table-cell" data-label="Account Type">
            <span class="md:hidden font-semibold text-gray-700">Account Type:</span>
            {{ provider.accountType || 'N/A' }}
          </td>
          <td class="p-3 flex justify-between md:table-cell" data-label="Service Type">
            <span class="md:hidden font-semibold text-gray-700">Service Type:</span>
            {{ provider.serviceType || 'N/A' }}
          </td>
          <td class="p-3 flex justify-between md:table-cell" data-label="Documents">
            <span class="md:hidden font-semibold text-gray-700">Documents:</span>
  
            @if (provider.nationalIdImage) {
              <img src="{{ provider.nationalIdImage.secure_url }}" 
                   alt="ID" 
                   class="doc-icon" 
                   (click)="showImage(provider.nationalIdImage.secure_url)">
            }
  
            @if (provider.driverLicenseImage) {
              <img src="{{ provider.driverLicenseImage.secure_url }}" 
                   alt="License" 
                   class="doc-icon" 
                   (click)="showImage(provider.driverLicenseImage.secure_url)">
            }
  
            @if (provider.carLicenseImage) {
              <img src="{{ provider.carLicenseImage.secure_url }}" 
                   alt="Car License" 
                   class="doc-icon" 
                   (click)="showImage(provider.carLicenseImage.secure_url)">
            }
          </td>
        </tr>
      </ng-template>
    </p-table>
  
    <!-- Image Popup -->
    <p-dialog header="Document Preview" [(visible)]="displayImage" [modal]="true" [style]="{width: '50vw'}">
      <img [src]="selectedImageUrl" alt="Document" class="w-full" />
    </p-dialog>
  </div>
  